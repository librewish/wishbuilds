# Maintainer: Haden Collins <collinshaden@gmail.com>
pkgname='wlogout-git'
pkgver=r42.a5e0357
pkgrel=1
pkgdesc="Logout menu for wayland"
arch=('x86_64')
license=("MIT")
url="https://github.com/ArtsyMacaw/wlogout"
source=("git+https://github.com/ArtsyMacaw/wlogout")
makedepends=("meson" "git" "scdoc")
depends=("gtk3" "gtk-layer-shell-git")
optdepends=("swaylock: default buttons" 
            "systemd: default buttons"
)
provides=("wlogout")
conflicts=("wlogout")
pkgver () {
	cd "wlogout"
	(
		set -o pipefail
		git describe --long 2>/dev/null | sed 's/\([^-]*-g\)/r\1/;s/-/./g' ||
		printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
	)
}

build() {
    cd "$srcdir/wlogout/"
  rm -rf build
  arch-meson build
  ninja -C build
}

package() {
	cd "$srcdir/wlogout"
	DESTDIR="$pkgdir/" ninja -C build install
    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
md5sums=('SKIP')
